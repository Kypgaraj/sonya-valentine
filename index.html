<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î–ª—è –°–æ–Ω–∏ üíå</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root { --accent: #ff4f8b; }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(-45deg, #ffd6e8, #ffe8d6, #fff0f5, #ffe0ec);
      background-size: 300% 300%;
      animation: bg 18s ease infinite;
      color: #a64d79;
      overflow: hidden;
      height: 100vh;
      margin: 0;
      position: relative;
    }

    @keyframes bg {
      0%   { background-position: 0% 50% }
      50%  { background-position: 100% 50% }
      100% { background-position: 0% 50% }
    }

    section {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      padding: 24px;
      position: absolute;
      inset: 0;
      transition: .6s ease;
      z-index: 10;
    }

    .hidden { opacity: 0; pointer-events: none; visibility: hidden; }

    .glass {
      background: rgba(255,255,255,0.45);
      backdrop-filter: blur(12px);
      padding: 32px 40px;
      border-radius: 28px;
      box-shadow: 0 15px 50px rgba(0,0,0,.15);
      width: 100%;
      max-width: 580px;
      position: relative;
      z-index: 12;
    }

    /* –§–æ—Ç–æ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω –≤ —Ñ–∏–Ω–∞–ª–µ */
    #final {
      background: url('photo.jpg') center center / cover no-repeat;
      background-attachment: fixed;
    }

    #final .glass {
      background: rgba(0,0,0,0.45);
      color: white;
      border: 1px solid rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }

    #final h1, #final p, #final .loveGlow {
      color: white;
      text-shadow: 0 2px 10px rgba(0,0,0,0.7);
    }

    h1, h2 {
      font-family: 'Playfair Display', serif;
      margin-bottom: 18px;
    }

    button {
      padding: 14px 26px;
      border: none;
      border-radius: 50px;
      background: linear-gradient(135deg, #ff8fb1, #ff4f8b);
      color: white;
      font-size: 16px;
      margin: 8px;
      box-shadow: 0 8px 25px rgba(255,105,160,.35);
      transition: all .3s ease;
      cursor: pointer;
      position: relative;
    }

    button:active { transform: scale(0.94); }

    #noBtn {
      background: linear-gradient(135deg, #a8a8a8, #7a7a7a);
      z-index: 30;
    }

    #noBtn.moving {
      position: absolute !important;
      transition: all 0.5s ease-out;
    }

    #hint {
      margin-top: 24px;
      font-size: 1.1em;
      color: #ff4f8b;
      font-weight: 500;
      opacity: 0.9;
    }

    .typewriter {
      overflow: hidden;
      white-space: nowrap;
      margin: 0 auto;
      letter-spacing: 0.5px;
      animation: typing 3.8s steps(28, end) forwards, blink-caret .8s step-end infinite;
      border-right: 3px solid #fff;
      width: 0;
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: #fff; }
    }

    .falling-heart {
      position: fixed;
      font-size: 20px;
      pointer-events: none;
      z-index: 3;
      animation: fall linear forwards;
    }

    @keyframes fall {
      0%   { transform: translateY(-10vh) rotate(0deg); opacity: 0.9; }
      100% { transform: translateY(110vh) rotate(1080deg); opacity: 0; }
    }

    .love-text {
      position: fixed;
      font-size: 15px;
      color: #ff4f8b;
      opacity: 0.38;
      pointer-events: none;
      animation: floatLove 10s linear forwards;
      white-space: nowrap;
      z-index: 1;
    }

    @keyframes floatLove {
      from { transform: translateY(110vh); opacity: 0; }
      12%  { opacity: 0.55; }
      88%  { opacity: 0.5; }
      to   { transform: translateY(-25vh); opacity: 0; }
    }

    .heart3d {
      width: 140px;
      height: 140px;
      position: relative;
      animation: rotate 8s linear infinite;
      cursor: pointer;
      margin: 40px auto;
      z-index: 15;
    }

    @keyframes rotate {
      from { transform: rotateY(0deg); }
      to   { transform: rotateY(360deg); }
    }

    .heart3d:before,
    .heart3d:after {
      content: "";
      position: absolute;
      width: 70px;
      height: 115px;
      background: var(--accent);
      border-radius: 70px 70px 0 0;
    }

    .heart3d:before {
      left: 70px;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }

    .heart3d:after {
      left: 0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }
  </style>
</head>
<body>

  <section id="intro">
    <div class="glass">
      <h1>–°–æ–Ω—è, —É –º–µ–Ω—è –¥–ª—è —Ç–µ–±—è –∫–æ–µ-—á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ‚Ä¶ üíå</h1>
      <button onclick="start()">–û—Ç–∫—Ä—ã—Ç—å –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É</button>
    </div>
  </section>

  <section id="quest" class="hidden">
    <div class="glass">
      <h2>–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –Ω–∞–≤—Å–µ–≥–¥–∞? üíñ</h2>
      <button onclick="yesAnswer()">üíï –î–∞</button>
      <button id="noBtn">üíî –ù–µ—Ç</button>
      <p id="tease" style="margin-top:16px; min-height:1.5em;"></p>
      <div id="hint">–ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å ¬´–ù–µ—Ç¬ª üòè</div>
    </div>
  </section>

  <section id="heartSection" class="hidden">
    <div class="glass">
      <h2>–ù–∞–∂–º–∏ –Ω–∞ —Å–µ—Ä–¥—Ü–µ üíó</h2>
      <div class="heart3d" onclick="transformLove()"></div>
    </div>
  </section>

  <section id="final" class="hidden">
    <div class="glass">
      <div class="loveGlow">üíñ</div>
      <h1><span id="typewriterText" class="typewriter">–°–æ–Ω—è, —è —Ç–µ–±—è –ª—é–±–ª—é</span></h1>
      <p style="margin-top:24px; font-size:1.2em;">–ù–∞–≤—Å–µ–≥–¥–∞ —Ç–≤–æ–π, –ú–∞–∫—Å–∏–º üíå</p>
    </div>
  </section>

<script>
// —Ñ—Ä–∞–∑—ã –ª—é–±–≤–∏
const loveReasons = [
  "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ–π –º–∏—Ä —è—Ä—á–µ", "–° —Ç–æ–±–æ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–æ–º–∞", "–¢—ã —É–º–µ–µ—à—å —Å–º–µ—à–∏—Ç—å –º–µ–Ω—è",
  "–¢—ã –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–∞—è", "–¢—ã –∑–∞–±–æ—Ç–ª–∏–≤–∞—è", "–¢—ã –¥–æ–±—Ä–∞—è", "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è",
  "–¢—ã –º–æ—è –°–æ–Ω—è ‚ù§Ô∏è", "–¢—ã –ª—É—á—à–µ–µ —á—Ç–æ —Å–æ –º–Ω–æ–π —Å–ª—É—á–∞–ª–æ—Å—å", "–¢—ã –º–æ—è –∂–∏–∑–Ω—å",
  "–¢—ã –º–æ—è –ª—é–±–æ–≤—å –≤—Å–µ–π –∂–∏–∑–Ω–∏", "–¢—ã –º–æ—ë —Å—á–∞—Å—Ç—å–µ", "–¢—ã –º–æ–π –º–∏—Ä", "–¢—ã –º–æ–π —Å–º—ã—Å–ª"
];

function spawnLoveText() {
  const text = document.createElement("div");
  text.className = "love-text";
  text.innerText = loveReasons[Math.floor(Math.random() * loveReasons.length)];
  text.style.left = Math.random() * 92 + 4 + "vw";
  text.style.animationDuration = (8 + Math.random() * 4) + "s";
  document.body.appendChild(text);
  setTimeout(() => text.remove(), 13000);
}

for (let i = 0; i < 5; i++) setTimeout(spawnLoveText, i * 150);
setInterval(spawnLoveText, 300 + Math.random() * 400);

// —ç–ª–µ–º–µ–Ω—Ç—ã
const intro       = document.getElementById("intro");
const quest       = document.getElementById("quest");
const heartSection = document.getElementById("heartSection");
const final       = document.getElementById("final");
const noBtn       = document.getElementById("noBtn");
const tease       = document.getElementById("tease");
const hint        = document.getElementById("hint");
const typewriter  = document.getElementById("typewriterText");

function start() {
  intro.classList.add("hidden");
  quest.classList.remove("hidden");
}

let attempts = 0;

noBtn.onclick = function(e) {
  e.preventDefault();
  attempts++;

  if (attempts === 1) tease.innerText = "–≠–π‚Ä¶ —Ç—ã —Å–µ—Ä—å—ë–∑–Ω–æ? üò≥";
  else if (attempts === 2) tease.innerText = "–ù—É –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶ ü•∫";
  else if (attempts === 3) tease.innerText = "–¢—ã –∂–µ –Ω–µ –≤—Å–µ—Ä—å—ë–∑‚Ä¶ –ø—Ä–∞–≤–¥–∞? üíî";
  else if (attempts <= 6) tease.innerText = "–Ø –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–∂–¥—É—Å—å üíô";
  else tease.innerText = "–¢—ã –Ω–µ —Å–¥–∞—ë—à—å—Å—è... —è —Ç–æ–∂–µ ‚ù§Ô∏è";

  // –ø–æ–∑–∏—Ü–∏—è —É–±–µ–≥–∞–Ω–∏—è
  const maxX = window.innerWidth - noBtn.offsetWidth - 40;
  const maxY = window.innerHeight - noBtn.offsetHeight - 40;

  const newX = Math.random() * maxX;
  const newY = Math.random() * maxY;

  noBtn.classList.add("moving");
  noBtn.style.left = newX + "px";
  noBtn.style.top  = newY + "px";

  // —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫
  const scale = Math.max(0.4, 1 - attempts * 0.08);
  noBtn.style.transform = `scale(${scale})`;
  noBtn.style.transition = `all ${0.4 + attempts * 0.08}s ease-out`; // —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ
};

function yesAnswer() {
  quest.classList.add("hidden");
  heartSection.classList.remove("hidden");

  confetti({
    particleCount: 140,
    spread: 80,
    origin: { y: 0.6 },
    colors: ['#ff4f8b', '#ff8fb1', '#ffffff', '#ffe0ec']
  });
  setTimeout(() => {
    confetti({ particleCount: 100, spread: 110, origin: { y: 0.7 } });
  }, 400);
}

function createFallingHeart() {
  const heart = document.createElement("div");
  heart.className = "falling-heart";
  heart.innerText = ["üíñ","üíï","‚ù§Ô∏è","‚ú®"][Math.floor(Math.random()*4)];
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.animationDuration = (3 + Math.random() * 3) + "s";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 9000);
}

function startHeartRain() {
  const interval = setInterval(createFallingHeart, 140);
  setTimeout(() => clearInterval(interval), 4000);
}

function transformLove() {
  const texts = document.querySelectorAll(".love-text");
  const centerX = window.innerWidth / 2;
  const centerY = window.innerHeight / 2;

  texts.forEach(t => {
    const rect = t.getBoundingClientRect();
    const heart = document.createElement("div");
    heart.className = "small-heart";
    heart.innerText = "üíñ";
    heart.style.left = rect.left + "px";
    heart.style.top  = rect.top  + "px";
    document.body.appendChild(heart);
    t.remove();

    setTimeout(() => {
      heart.style.left = centerX + "px";
      heart.style.top  = centerY + "px";
      heart.style.transform = "translate(-50%, -50%) scale(0.4)";
      heart.style.opacity = "0";
    }, 80);
  });

  startHeartRain();

  setTimeout(() => {
    heartSection.classList.add("hidden");
    final.classList.remove("hidden");

    typewriter.style.width = "0";
    typewriter.style.animation = "none";
    void typewriter.offsetWidth;
    typewriter.style.animation = "typing 3.8s steps(28, end) forwards, blink-caret .8s step-end infinite";
  }, 2200);
}
</script>
</body>
</html>